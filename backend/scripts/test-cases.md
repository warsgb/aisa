# AISA LTC 重构项目测试用例文档

## 测试环境信息

- **测试环境**: 本地开发环境
- **前端地址**: http://localhost:3000
- **后端地址**: http://localhost:3001
- **测试日期**: 2026-02-20
- **测试版本**: v1.0.0

---

## 一、数据模型测试

### 实体1: LtcNode（LTC流程节点）

#### 用例1.1: 创建节点
- **前置条件**: 数据库连接正常，团队存在
- **操作步骤**:
  1. POST /teams/:teamId/ltc-nodes
  2. 请求体: { name: "线索", order: 1, description: "初始线索阶段" }
- **预期结果**:
  - 状态码: 201
  - 返回数据包含id、name、order、description字段
  - 数据库中成功创建记录
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.2: 更新节点
- **前置条件**: 节点已创建
- **操作步骤**:
  1. PUT /teams/:teamId/ltc-nodes/:id
  2. 请求体: { name: "新线索", description: "更新后的描述" }
- **预期结果**:
  - 状态码: 200
  - 数据库记录已更新
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.3: 删除节点
- **前置条件**: 节点已创建且没有技能绑定
- **操作步骤**:
  1. DELETE /teams/:teamId/ltc-nodes/:id
- **预期结果**:
  - 状态码: 204
  - 数据库记录已删除
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.4: 批量排序
- **前置条件**: 多个节点已创建
- **操作步骤**:
  1. PUT /teams/:teamId/ltc-nodes/reorder
  2. 请求体: { nodes: [{id: "1", order: 2}, {id: "2", order: 1}] }
- **预期结果**:
  - 状态码: 200
  - 所有节点order字段已更新
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.5: 重置默认节点
- **前置条件**: 团队已存在
- **操作步骤**:
  1. POST /teams/:teamId/ltc-nodes/reset
- **预期结果**:
  - 状态码: 200
  - 创建8个默认节点（线索、商机、方案、POC、商务谈判、合同、交付、回款）
  - 节点顺序为1-8
- **实际结果**: [待测试]
- **状态**: Pending

### 实体2: NodeSkillBinding（节点-技能绑定）

#### 用例1.6: 创建绑定
- **前置条件**: 节点和技能已创建
- **操作步骤**:
  1. POST /teams/:teamId/ltc-nodes/:nodeId/bindings
  2. 请求体: { skill_id: "skill-1", order: 1 }
- **预期结果**:
  - 状态码: 201
  - 返回数据包含id、node_id、skill_id、order字段
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.7: 删除绑定
- **前置条件**: 绑定已创建
- **操作步骤**:
  1. DELETE /teams/:teamId/ltc-nodes/:nodeId/bindings/:bindingId
- **预期结果**:
  - 状态码: 204
  - 绑定记录已删除
- **实际结果**: [待测试]
- **状态**: Pending

### 实体3: CustomerProfile（客户背景资料）

#### 用例1.8: 创建/更新客户资料
- **前置条件**: 客户已创建
- **操作步骤**:
  1. PUT /teams/:teamId/customers/:customerId/profile
  2. 请求体: { background_info: "# 背景", decision_chain: "# 决策链", history_notes: "# 历史" }
- **预期结果**:
  - 状态码: 200
  - 资料正确保存（支持Markdown格式）
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例1.9: 获取客户资料
- **前置条件**: 客户资料已创建
- **操作步骤**:
  1. GET /teams/:teamId/customers/:customerId/profile
- **预期结果**:
  - 状态码: 200
  - 返回数据包含background_info、decision_chain、history_notes字段
- **实际结果**: [待测试]
- **状态**: Pending

### 实体4: TeamMemberPreference（团队成员偏好）

#### 用例1.10: 设置铁三角角色
- **前置条件**: 团队成员已存在
- **操作步骤**:
  1. PUT /teams/:teamId/members/:memberId/preference
  2. 请求体: { iron_triangle_role: "AR", favorite_skill_ids: ["skill-1", "skill-2"] }
- **预期结果**:
  - 状态码: 200
  - 角色只能为AR/SR/FR之一
- **实际结果**: [待测试]
- **状态**: Pending

---

## 二、首页功能测试

### 模块1: 客户选择

#### 用例2.1: 客户搜索下拉
- **前置条件**: 已登录，团队有多个客户
- **操作步骤**:
  1. 进入首页
  2. 点击顶部客户搜索框
  3. 输入客户名称关键字
- **预期结果**:
  - 下拉列表显示匹配的客户
  - 支持模糊搜索
  - 显示客户名称和联系人
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.2: 选择客户
- **前置条件**: 客户搜索下拉已打开
- **操作步骤**:
  1. 点击列表中的客户
- **预期结果**:
  - 搜索框显示"客户名称 - 联系人"
  - 页面刷新显示该客户的LTC流程和技能
  - 历史记录区域显示该客户的历史
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.3: 清除客户选择
- **前置条件**: 已选择客户
- **操作步骤**:
  1. 点击搜索框的清除按钮
- **预期结果**:
  - 搜索框清空
  - 页面显示引导提示"请选择一个客户"
- **实际结果**: [待测试]
- **状态**: Pending

### 模块2: LTC流程展示

#### 用例2.4: 横向流程节点展示
- **前置条件**: 已选择客户，LTC节点已配置
- **操作步骤**:
  1. 观察页面中间的LTC流程区域
- **预期结果**:
  - 横向展示所有节点（线索→商机→方案→POC→商务谈判→合同→交付→回款）
  - 每个节点有编号和名称
  - 节点之间有关联箭头
  - 支持横向滚动
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.5: 节点内技能展示
- **前置条件**: 节点已绑定技能
- **操作步骤**:
  1. 查看每个节点下方的技能卡片
- **预期结果**:
  - 每个技能显示标题（加粗）
  - 显示描述（灰色小字）
  - 显示执行按钮（绿色播放图标）
  - 技能按order排序
- **实际结果**: [待测试]
- **状态**: Pending

### 模块3: 铁三角角色筛选

#### 用例2.6: 角色切换
- **前置条件**: 已选择客户
- **操作步骤**:
  1. 点击"全部技能"按钮
  2. 点击"客户经理"按钮
  3. 点击"解决方案经理"按钮
  4. 点击"交付经理"按钮
- **预期结果**:
  - 按钮高亮显示当前选中状态
  - 技能列表按角色筛选（每个技能可配置适用角色）
  - 切换时技能卡片有过渡动画
- **实际结果**: [待测试]
- **状态**: Pending

### 模块4: 技能执行

#### 用例2.7: 打开技能执行弹窗
- **前置条件**: 已选择客户，有可用技能
- **操作步骤**:
  1. 点击技能卡片的执行按钮
- **预期结果**:
  - 弹窗打开
  - 显示技能名称和描述
  - 显示参数输入表单（根据技能配置动态生成）
  - 显示引用文档选择器
  - 显示流式输出区域
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.8: 执行技能
- **前置条件**: 技能执行弹窗已打开
- **操作步骤**:
  1. 填写必要参数
  2. 选择引用文档（可选）
  3. 点击执行按钮
- **预期结果**:
  - 流式输出区域开始显示AI回复
  - 输出完成后显示完整结果
  - 历史记录区域实时更新
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.9: 引用历史文档
- **前置条件**: 有历史执行记录
- **操作步骤**:
  1. 打开技能执行弹窗
  2. 在引用文档选择器中选择历史记录
  3. 点击执行
- **预期结果**:
  - 执行时context包含引用的文档内容
  - AI输出参考了历史文档
- **实际结果**: [待测试]
- **状态**: Pending

### 模块5: 历史记录

#### 用例2.10: 历史记录展示
- **前置条件**: 已选择客户，有执行记录
- **操作步骤**:
  1. 查看页面底部历史时间线
- **预期结果**:
  - 按时间倒序排列
  - 显示节点标签（蓝色）
  - 显示技能名称
  - 显示执行时间
  - 有查看和编辑按钮
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例2.11: 查看历史详情
- **前置条件**: 历史记录已展示
- **操作步骤**:
  1. 点击历史记录的查看按钮
- **预期结果**:
  - 弹窗显示完整的执行记录
  - 包含输入参数和AI输出
- **实际结果**: [待测试]
- **状态**: Pending

---

## 三、LTC流程配置测试

### 模块1: 节点管理

#### 用例3.1: 节点列表展示
- **前置条件**: 已登录系统管理员
- **操作步骤**:
  1. 进入"系统管理"→"LTC流程配置"
- **预期结果**:
  - 显示配置说明卡片
  - 显示所有节点列表
  - 每个节点显示序号、名称、上移/下移/删除按钮
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.2: 添加节点
- **前置条件**: 在LTC流程配置页面
- **操作步骤**:
  1. 点击"添加节点"按钮
  2. 输入节点名称和描述
  3. 点击保存
- **预期结果**:
  - 新节点添加到列表末尾
  - 序号自动递增
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.3: 编辑节点
- **前置条件**: 节点已存在
- **操作步骤**:
  1. 点击节点名称
  2. 修改名称和描述
  3. 点击保存
- **预期结果**:
  - 节点信息更新
  - 其他关联数据不受影响
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.4: 拖拽排序
- **前置条件**: 多个节点已存在
- **操作步骤**:
  1. 拖拽节点到目标位置
  2. 释放鼠标
- **预期结果**:
  - 节点顺序更新
  - 序号自动重新计算
  - 有视觉反馈（拖拽时的占位符）
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.5: 上移/下移节点
- **前置条件**: 多个节点已存在
- **操作步骤**:
  1. 点击节点的上移按钮
  2. 点击节点的下移按钮
- **预期结果**:
  - 节点与相邻节点交换位置
  - 边界节点（第一个/最后一个）的上移/下移按钮禁用
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.6: 删除节点
- **前置条件**: 节点已存在
- **操作步骤**:
  1. 点击删除按钮
  2. 确认删除
- **预期结果**:
  - 节点从列表移除
  - 有二次确认弹窗
  - 有关联技能时提示不能删除或级联删除
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.7: 重置默认配置
- **前置条件**: 节点已被修改
- **操作步骤**:
  1. 点击"重置默认"按钮
  2. 确认重置
- **预期结果**:
  - 所有节点恢复为8个默认节点
  - 自定义节点被删除
  - 有二次确认弹窗
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.8: 保存配置
- **前置条件**: 节点已被修改
- **操作步骤**:
  1. 点击"保存配置"按钮
- **预期结果**:
  - 配置保存成功
  - 显示成功提示
  - 首页LTC流程展示更新
- **实际结果**: [待测试]
- **状态**: Pending

### 模块2: 节点-技能绑定

#### 用例3.9: 打开绑定配置
- **前置条件**: 在LTC流程配置页面
- **操作步骤**:
  1. 点击节点的"配置技能"按钮
- **预期结果**:
  - 弹窗显示可用技能列表
  - 已绑定的技能显示为选中状态
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.10: 添加技能绑定
- **前置条件**: 绑定配置弹窗已打开
- **操作步骤**:
  1. 勾选要绑定的技能
  2. 设置技能在该节点的顺序
  3. 点击保存
- **预期结果**:
  - 绑定创建成功
  - 首页该节点下显示新绑定的技能
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例3.11: 移除技能绑定
- **前置条件**: 绑定配置弹窗已打开，有已绑定技能
- **操作步骤**:
  1. 取消勾选已绑定的技能
  2. 点击保存
- **预期结果**:
  - 绑定移除成功
  - 首页该节点下不再显示该技能
- **实际结果**: [待测试]
- **状态**: Pending

---

## 四、客户维护测试

### 模块1: 客户列表

#### 用例4.1: 客户列表展示
- **前置条件**: 已登录，有客户数据
- **操作步骤**:
  1. 进入"客户管理"→"客户维护"
- **预期结果**:
  - 卡片式列表展示客户
  - 每张卡片显示：公司名称、联系人、年收入
  - 有查看和编辑按钮
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例4.2: 搜索客户
- **前置条件**: 在客户维护页面
- **操作步骤**:
  1. 在搜索框输入客户名称或联系人
- **预期结果**:
  - 实时过滤显示匹配的客户
  - 支持模糊搜索
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例4.3: 新建客户
- **前置条件**: 在客户维护页面
- **操作步骤**:
  1. 点击"新建客户"按钮
  2. 填写客户信息（名称、联系人、年收入等）
  3. 点击保存
- **预期结果**:
  - 新客户出现在列表中
  - 校验必填字段
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例4.4: 编辑客户
- **前置条件**: 在客户维护页面
- **操作步骤**:
  1. 点击客户的编辑按钮
  2. 修改客户信息
  3. 点击保存
- **预期结果**:
  - 客户信息更新
  - 列表显示更新后的信息
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例4.5: 查看客户详情
- **前置条件**: 在客户维护页面
- **操作步骤**:
  1. 点击客户的查看按钮
- **预期结果**:
  - 弹窗或页面显示客户详细信息
  - 包含背景资料（可编辑）
  - 预留第三方数据入口UI（天眼查按钮）
- **实际结果**: [待测试]
- **状态**: Pending

### 模块2: 客户背景资料

#### 用例4.6: 编辑背景资料
- **前置条件**: 在客户详情页面
- **操作步骤**:
  1. 点击背景资料编辑区域
  2. 输入Markdown格式内容
  3. 点击保存
- **预期结果**:
  - 资料保存成功
  - 支持Markdown预览
- **实际结果**: [待测试]
- **状态**: Pending

---

## 五、技能管理测试

### 模块1: 技能列表

#### 用例5.1: 技能列表展示
- **前置条件**: 已登录系统管理员
- **操作步骤**:
  1. 进入"系统管理"→"技能管理"
- **预期结果**:
  - 列表展示所有技能
  - 每个技能显示：名称、激活状态标签、描述、所属阶段标签
  - 有编辑和删除按钮
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例5.2: 搜索技能
- **前置条件**: 在技能管理页面
- **操作步骤**:
  1. 在搜索框输入技能名称或描述
- **预期结果**:
  - 实时过滤显示匹配的技能
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例5.3: 创建技能
- **前置条件**: 在技能管理页面
- **操作步骤**:
  1. 点击"创建技能"按钮
  2. 填写技能信息：名称、描述、prompt、参数配置、适用角色
  3. 点击保存
- **预期结果**:
  - 新技能出现在列表中
  - 状态默认为"已激活"
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例5.4: 编辑技能
- **前置条件**: 在技能管理页面
- **操作步骤**:
  1. 点击技能的编辑按钮
  2. 修改技能信息
  3. 点击保存
- **预期结果**:
  - 技能信息更新
  - 已绑定的节点技能同步更新
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例5.5: 删除技能
- **前置条件**: 在技能管理页面
- **操作步骤**:
  1. 点击技能的删除按钮
  2. 确认删除
- **预期结果**:
  - 技能从列表移除
  - 有关联绑定时提示不能删除
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例5.6: 激活/停用技能
- **前置条件**: 在技能管理页面
- **操作步骤**:
  1. 点击切换技能的激活状态
- **预期结果**:
  - 技能状态切换
  - 停用后首页不再显示该技能
- **实际结果**: [待测试]
- **状态**: Pending

---

## 六、回归测试

### 模块1: 现有功能验证

#### 用例6.1: 团队管理功能
- **前置条件**: 已登录系统管理员
- **操作步骤**:
  1. 进入"系统管理"→"团队管理"
  2. 验证团队成员CRUD功能
  3. 验证角色分配功能
- **预期结果**:
  - 原有功能正常工作
  - 新增铁三角角色偏好设置
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例6.2: AI对话功能
- **前置条件**: 已登录
- **操作步骤**:
  1. 执行任意技能
  2. 验证流式输出正常
- **预期结果**:
  - AI回复正常流式输出
  - 无卡顿或断开
- **实际结果**: [待测试]
- **状态**: Pending

#### 用例6.3: 权限控制
- **前置条件**: 使用不同权限账号登录
- **操作步骤**:
  1. 管理员账号：验证可访问所有功能
  2. 普通成员账号：验证只能访问授权功能
- **预期结果**:
  - 权限控制正常工作
  - 未授权操作返回403
- **实际结果**: [待测试]
- **状态**: Pending

---

## 七、性能测试

### 用例7.1: 大量客户场景
- **前置条件**: 系统中有1000+客户
- **操作步骤**:
  1. 测试客户搜索响应时间
  2. 测试客户列表加载时间
- **预期结果**:
  - 搜索响应<500ms
  - 列表加载<2s
- **实际结果**: [待测试]
- **状态**: Pending

### 用例7.2: 大量技能场景
- **前置条件**: 系统中有100+技能
- **操作步骤**:
  1. 测试技能列表加载
  2. 测试技能执行响应
- **预期结果**:
  - 列表加载<1s
  - 技能执行正常
- **实际结果**: [待测试]
- **状态**: Pending

### 用例7.3: 大量历史记录场景
- **前置条件**: 单个客户有100+历史记录
- **操作步骤**:
  1. 进入首页
  2. 查看历史时间线
- **预期结果**:
  - 页面加载正常
  - 时间线滚动流畅
- **实际结果**: [待测试]
- **状态**: Pending

---

## 八、UI验收测试

### 用例8.1: 色彩规范
- **测试内容**:
  - 主色：#1677FF
  - 底色：#FFFFFF
  - 辅助色：#F5F7FA
  - 成功色：#52C41A
  - 警告色：#FAAD14
  - 错误色：#F5222D
- **预期结果**: 所有组件使用正确的颜色
- **实际结果**: [待测试]
- **状态**: Pending

### 用例8.2: 布局规范
- **测试内容**:
  - 卡片圆角：8px
  - 卡片阴影：0 2px 8px rgba(0,0,0,0.08)
  - 间距：16px基础间距
- **预期结果**: 布局符合设计规范
- **实际结果**: [待测试]
- **状态**: Pending

### 用例8.3: 响应式适配
- **测试内容**:
  - 桌面端(1920x1080)：正常显示
  - 笔记本(1366x768)：正常显示
  - 平板(768x1024)：自适应
  - 手机(375x812)：移动端适配
- **预期结果**: 各分辨率下布局正常
- **实际结果**: [待测试]
- **状态**: Pending

### 用例8.4: 浏览器兼容性
- **测试内容**:
  - Chrome最新版
  - Firefox最新版
  - Safari最新版
  - Edge最新版
- **预期结果**: 各浏览器下功能正常
- **实际结果**: [待测试]
- **状态**: Pending

---

## 九、测试数据准备

### 9.1 测试团队数据
```json
{
  "team": {
    "id": "test-team-001",
    "name": "测试团队",
    "description": "LTC重构测试专用团队"
  }
}
```

### 9.2 测试用户数据
```json
{
  "users": [
    {
      "id": "user-admin-001",
      "email": "admin@test.com",
      "name": "管理员",
      "role": "ADMIN",
      "iron_triangle_role": "AR"
    },
    {
      "id": "user-ar-001",
      "email": "ar@test.com",
      "name": "客户经理",
      "role": "MEMBER",
      "iron_triangle_role": "AR"
    },
    {
      "id": "user-sr-001",
      "email": "sr@test.com",
      "name": "方案经理",
      "role": "MEMBER",
      "iron_triangle_role": "SR"
    },
    {
      "id": "user-fr-001",
      "email": "fr@test.com",
      "name": "交付经理",
      "role": "MEMBER",
      "iron_triangle_role": "FR"
    }
  ]
}
```

### 9.3 测试客户数据
```json
{
  "customers": [
    {
      "id": "cust-001",
      "name": "华为技术有限公司",
      "contact": "张明",
      "revenue": "1000万",
      "industry": "通信设备"
    },
    {
      "id": "cust-002",
      "name": "腾讯科技有限公司",
      "contact": "李娜",
      "revenue": "800万",
      "industry": "互联网"
    },
    {
      "id": "cust-003",
      "name": "阿里巴巴集团",
      "contact": "王强",
      "revenue": "1200万",
      "industry": "电子商务"
    },
    {
      "id": "cust-004",
      "name": "百度在线网络技术公司",
      "contact": "刘芳",
      "revenue": "600万",
      "industry": "互联网"
    },
    {
      "id": "cust-005",
      "name": "字节跳动科技有限公司",
      "contact": "陈伟",
      "revenue": "900万",
      "industry": "互联网"
    }
  ]
}
```

### 9.4 测试LTC节点数据
```json
{
  "ltc_nodes": [
    { "id": "node-001", "name": "线索", "order": 1, "description": "初始线索阶段" },
    { "id": "node-002", "name": "商机", "order": 2, "description": "商机确认阶段" },
    { "id": "node-003", "name": "方案", "order": 3, "description": "方案设计阶段" },
    { "id": "node-004", "name": "POC", "order": 4, "description": "POC测试阶段" },
    { "id": "node-005", "name": "商务谈判", "order": 5, "description": "商务谈判阶段" },
    { "id": "node-006", "name": "合同", "order": 6, "description": "合同签订阶段" },
    { "id": "node-007", "name": "交付", "order": 7, "description": "项目交付阶段" },
    { "id": "node-008", "name": "回款", "order": 8, "description": "回款跟踪阶段" }
  ]
}
```

### 9.5 测试技能数据
```json
{
  "skills": [
    {
      "id": "skill-001",
      "name": "客户信息搜索",
      "description": "快速获取客户工商信息、联系方式等基础数据",
      "status": "ACTIVE",
      "applicable_roles": ["AR", "SR"],
      "tags": ["线索"]
    },
    {
      "id": "skill-002",
      "name": "线索评分",
      "description": "AI评估线索质量，给出跟进优先级建议",
      "status": "ACTIVE",
      "applicable_roles": ["AR"],
      "tags": ["线索"]
    },
    {
      "id": "skill-003",
      "name": "需求深访",
      "description": "多轮对话式深入挖掘客户需求和痛点",
      "status": "ACTIVE",
      "applicable_roles": ["SR"],
      "tags": ["商机"]
    },
    {
      "id": "skill-004",
      "name": "竞争对手分析",
      "description": "分析竞品方案，生成差异化策略",
      "status": "ACTIVE",
      "applicable_roles": ["SR"],
      "tags": ["商机"]
    },
    {
      "id": "skill-005",
      "name": "电梯演讲话术",
      "description": "生成60秒快速打动客户的演讲稿",
      "status": "ACTIVE",
      "applicable_roles": ["AR", "SR"],
      "tags": ["商机"]
    },
    {
      "id": "skill-006",
      "name": "技术方案生成",
      "description": "基于需求自动生成技术方案框架",
      "status": "ACTIVE",
      "applicable_roles": ["SR"],
      "tags": ["方案"]
    },
    {
      "id": "skill-007",
      "name": "方案评审助手",
      "description": "模拟客户视角评审方案，找出潜在问题",
      "status": "ACTIVE",
      "applicable_roles": ["SR"],
      "tags": ["方案"]
    },
    {
      "id": "skill-008",
      "name": "POC计划生成",
      "description": "生成详细的POC测试计划和验收标准",
      "status": "ACTIVE",
      "applicable_roles": ["SR", "FR"],
      "tags": ["POC"]
    },
    {
      "id": "skill-009",
      "name": "技术风险评估",
      "description": "识别POC阶段可能的技术风险",
      "status": "ACTIVE",
      "applicable_roles": ["SR", "FR"],
      "tags": ["POC"]
    },
    {
      "id": "skill-010",
      "name": "报价策略生成",
      "description": "基于成本和竞争分析给出报价建议",
      "status": "ACTIVE",
      "applicable_roles": ["AR"],
      "tags": ["商务谈判"]
    },
    {
      "id": "skill-011",
      "name": "谈判模拟演练",
      "description": "模拟客户角色进行谈判对练",
      "status": "ACTIVE",
      "applicable_roles": ["AR"],
      "tags": ["商务谈判"]
    }
  ]
}
```

### 9.6 测试历史记录数据
```json
{
  "interactions": [
    {
      "id": "interaction-001",
      "customer_id": "cust-001",
      "skill_id": "skill-006",
      "node_id": "node-003",
      "skill_name": "技术方案生成",
      "executed_at": "2026-02-19T16:45:00Z",
      "status": "COMPLETED"
    },
    {
      "id": "interaction-002",
      "customer_id": "cust-001",
      "skill_id": "skill-003",
      "node_id": "node-002",
      "skill_name": "需求深访",
      "executed_at": "2026-02-18T14:30:00Z",
      "status": "COMPLETED"
    },
    {
      "id": "interaction-003",
      "customer_id": "cust-001",
      "skill_id": "skill-001",
      "node_id": "node-001",
      "skill_name": "客户信息搜索",
      "executed_at": "2026-02-15T10:20:00Z",
      "status": "COMPLETED"
    }
  ]
}
```

---

## 十、API测试脚本

### 10.1 LTC节点API测试

```bash
# 获取LTC节点列表
curl -X GET http://localhost:3001/api/teams/test-team-001/ltc-nodes \
  -H "Authorization: Bearer YOUR_TOKEN"

# 创建节点
curl -X POST http://localhost:3001/api/teams/test-team-001/ltc-nodes \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "测试节点", "order": 1, "description": "测试描述"}'

# 更新节点
curl -X PUT http://localhost:3001/api/teams/test-team-001/ltc-nodes/node-001 \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "更新后的名称"}'

# 删除节点
curl -X DELETE http://localhost:3001/api/teams/test-team-001/ltc-nodes/node-001 \
  -H "Authorization: Bearer YOUR_TOKEN"

# 批量排序
curl -X PUT http://localhost:3001/api/teams/test-team-001/ltc-nodes/reorder \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"nodes": [{"id": "node-001", "order": 2}, {"id": "node-002", "order": 1}]}'

# 重置默认节点
curl -X POST http://localhost:3001/api/teams/test-team-001/ltc-nodes/reset \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 10.2 节点-技能绑定API测试

```bash
# 获取节点绑定
curl -X GET http://localhost:3001/api/teams/test-team-001/ltc-nodes/node-001/bindings \
  -H "Authorization: Bearer YOUR_TOKEN"

# 创建绑定
curl -X POST http://localhost:3001/api/teams/test-team-001/ltc-nodes/node-001/bindings \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"skill_id": "skill-001", "order": 1}'

# 删除绑定
curl -X DELETE http://localhost:3001/api/teams/test-team-001/ltc-nodes/node-001/bindings/binding-001 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 10.3 客户资料API测试

```bash
# 获取客户资料
curl -X GET http://localhost:3001/api/teams/test-team-001/customers/cust-001/profile \
  -H "Authorization: Bearer YOUR_TOKEN"

# 更新客户资料
curl -X PUT http://localhost:3001/api/teams/test-team-001/customers/cust-001/profile \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"background_info": "# 背景信息", "decision_chain": "# 决策链", "history_notes": "# 历史"}'
```

### 10.4 成员偏好API测试

```bash
# 获取成员偏好
curl -X GET http://localhost:3001/api/teams/test-team-001/members/user-ar-001/preference \
  -H "Authorization: Bearer YOUR_TOKEN"

# 更新成员偏好
curl -X PUT http://localhost:3001/api/teams/test-team-001/members/user-ar-001/preference \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"iron_triangle_role": "AR", "favorite_skill_ids": ["skill-001", "skill-002"]}'
```

---

## 测试进度跟踪

| 模块 | 总用例数 | 通过 | 失败 | 阻塞 | 未测试 |
|------|---------|------|------|------|--------|
| 数据模型测试 | 10 | 0 | 0 | 0 | 10 |
| 首页功能测试 | 11 | 0 | 0 | 0 | 11 |
| LTC流程配置测试 | 11 | 0 | 0 | 0 | 11 |
| 客户维护测试 | 6 | 0 | 0 | 0 | 6 |
| 技能管理测试 | 6 | 0 | 0 | 0 | 6 |
| 回归测试 | 3 | 0 | 0 | 0 | 3 |
| 性能测试 | 3 | 0 | 0 | 0 | 3 |
| UI验收测试 | 4 | 0 | 0 | 0 | 4 |
| **合计** | **54** | **0** | **0** | **0** | **54** |

---

## Bug记录表

| BugID | 模块 | 描述 | 严重程度 | 状态 | 指派给 | 备注 |
|-------|------|------|----------|------|--------|------|
| - | - | - | - | - | - | - |

---

## 测试结论

[待测试完成后填写]

---

**文档版本**: v1.0
**最后更新**: 2026-02-20
**测试工程师**: QA Team
